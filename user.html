<!doctype html>
<html>
<head>
	<title data-l10n-id="home.serverName">连星</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="shortcut icon" href="/favicon.ico">
    
    <link href="static/bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="static/flat-ui-dist/css/flat-ui.min.css" rel="stylesheet">
    
    <link href="static/css/common-setting.css" rel="stylesheet">
    <link href="static/css/insidePageSetting.css" rel="stylesheet">
    <link href="static/css/user.css" rel="stylesheet">
</head>

<body>
	<div id="header">
    	<div class="container dispace-1">
        	<span id="welcome">欢迎来到连星</span>&nbsp;&nbsp;
            <span id="introduce">实时互动教学网站</span>
            <div class="btn-group detailGroup pull-right userinfo">
            	<a data-toggle="dropdown" href="#"><img src="pic/user.png"></a>
                <ul role="menu" class="dropdown-menu userdropdown">
                	<li><a href="#"><span class="fui-user"></span> uiop0009</a></li>
                    <li><a href="#"><span class="fui-gear"></span> 账号设置</a></li>
                    <li><a href="#"><span class="fui-exit"></span> 退出</a></li>
                </ul>
            </div>
            <a class="pull-right notice" href="/user/messages"><span class="glyphicon glyphicon-bullhorn"></span> <span id="noticeNum">&nbsp;&nbsp;</span></a>
            
        </div>   
    </div>
    <!--主菜单-->
    <div class="container dispace-1">
    	<nav class="navbar navbar-defind" role="navigation">
        	<div class="navbar-header">
            	<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mainMenu"></button>
                <a class="navbar-brand-defind" href="/user"><span class="glyphicon glyphicon-send" id="send"></span><span id="logotitle">连 星</span></a>
            </div>
            <div class="collapse navbar-collapse" id="mainMenu">
            	<ul class="nav navbar-nav mainOption">
                	<li class="active"><a class="grey" href="/user">&nbsp; 我 &nbsp;</a></li>
                    <li><a class="grey" href="/user/contacts">联系人</a></li>
                    <li><a class="grey" href="/user/userGroups">小组</a></li>
                    <li><a class="grey" href="/user/pads">文档</a></li>
                    <li><a class="grey" href="/user/slides">幻灯片</a></li>
                </ul>
                <form class="navbar-form navbar-right" id="searchform" action="#" role="search">
                	<div class="form-group">
                    	<div class="input-group">
                        	<input class="form-control" id="searchBox" type="search" placeholder="用户/小组">
                            <span class="input-group-btn">
                            	<button type="submit" class="btn" id="searchBtn"><span class="fui-search"></span></button>
                            </span>
                        </div>
                    </div>
                </form>
            </div>
        </nav>
    </div>
    
    <div id="banner">
    	<div class="container dispace-2">
        	<!--消息窗-->
            <div class="center messageContainer">
            <div id="newMessage" class="newMessage hide">
            	<div class="pull-left"><span class="glyphicon glyphicon-bullhorn suonaIcon"></span> <span class="newMessageTitle" id="msgTitle"></span></div>
                <div class="pull-right arrowhead"><a id="develop"><span id="developIcon" class="fui-arrow-right mailIcon"></span></a></div>
                <div class="text-center messageContent" id="msgContent">
                	
                </div>
                <a id="viewAll" class="hide" href="/user/messages">
                	<span class="fui-eye"> 查看全部
                </a>
                <div id="bottomBtn" class="text-center hide">
                	<button class="btn btn-link smallBtn" id="allExcept"><span class="fui-check-circle"></span> 全部接受</button>
                    <button class="btn btn-link smallBtn" id="allLgnore"><span class="fui-cross-circle"></span> 全部忽略</button>
                    <button class="btn btn-link smallBtn" id="closePanel"><span class="fui-cross"></span> 关闭窗口</button>
                </div>
            </div>
            </div>
            <!--banner标题-->
        	<div class="bannerText">
        		<p class="userID">uiop0009</p>
            	<p class="salutatory">欢迎来到连星 &nbsp; &nbsp;&nbsp;开启自由连接</p>
            </div>
        </div>
    </div>
    
    <!--我的文档-->
    <div class="container dispace-2 myDoc">
        <p class="column-title standard-grey">我的文档</p>
        <div class="row" id="docSearch">
            <div class="col-sm-10 col-xs-9">
            	<input type="text" placeholder="文档标题" class="form-control searchFrame">
  			</div>
            <div class="col-sm-2 col-xs-3">
  				<button class="btn btn-whiteframe pull-right" type="submit">新 文 档</button>
            </div>
        </div>
        <div class="row row-fluid">
            <div class="col-sm-11 col-xs-10 outcontainer1">
                <div class="row">
                    	<div class="col-sm-3 col-xs-6">
                        	<p class="docTitle groupTitle"><a href="#">工作计划</a></p>
                            <p class="docInfo standard-grey">最近更新：</p>
                            <p class="docInfo standard-grey">2014-12-25 15:30</p>
                            <div class="btn-group detailGroup">
                            	<button data-toggle="dropdown" class="btn btn-whiteframe dropdown-toggle detailBtn" type="button">详 情 <span class="caret"></span></button>
                                <ul role="menu" class="dropdown-menu docDetail">
                                	<p class="innertitle">文档名：</p>
                                    <a href="#">工作计划</a>
                                    <p class="innertitle">最近更新：</p>
                                    <p>2014-12-25 15:30</p>
                                    <p class="innertitle">已共享的组：</p>
                                    <p><a href="#">hepea</a><a href="#">议会</a><a href="#">大班</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                    <p class="innertitle">已共享的联系人：</p>
                                    <p><a href="#">小飞机</a><a href="#">hiearth</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                </ul>
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                        	<p class="docTitle groupTitle"><a href="#">学习计划</a></p>
                            <p class="docInfo standard-grey">最近更新：</p>
                            <p class="docInfo standard-grey">2014-12-25 15:30</p>
                            <div class="btn-group detailGroup">
                            	<button data-toggle="dropdown" class="btn btn-whiteframe dropdown-toggle detailBtn" type="button">详 情 <span class="caret"></span></button>
                                <ul role="menu" class="dropdown-menu docDetail">
                                	<p class="innertitle">文档名：</p>
                                    <a href="#">学习计划</a>
                                    <p class="innertitle">最近更新：</p>
                                    <p>2014-12-25 15:30</p>
                                    <p class="innertitle">已共享的组：</p>
                                    <p><a href="#">hepea</a><a href="#">议会</a><a href="#">大班</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                    <p class="innertitle">已共享的联系人：</p>
                                    <p><a href="#">小飞机</a><a href="#">hiearth</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                </ul>
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                        	<p class="docTitle groupTitle"><a href="#">讨论会</a></p>
                            <p class="docInfo standard-grey">最近更新：</p>
                            <p class="docInfo standard-grey">2014-12-25 15:30</p>
                            <div class="btn-group detailGroup">
                            	<button data-toggle="dropdown" class="btn btn-whiteframe dropdown-toggle detailBtn" type="button">详 情 <span class="caret"></span></button>
                                <ul role="menu" class="dropdown-menu docDetail">
                                	<p class="innertitle">文档名：</p>
                                    <a href="#">讨论会</a>
                                    <p class="innertitle">最近更新：</p>
                                    <p>2014-12-25 15:30</p>
                                    <p class="innertitle">已共享的组：</p>
                                    <p><a href="#">hepea</a><a href="#">议会</a><a href="#">大班</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                    <p class="innertitle">已共享的联系人：</p>
                                    <p><a href="#">小飞机</a><a href="#">hiearth</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                </ul>
                            </div>
                        </div>
                        <div class="col-sm-3 col-xs-6">
                        	<p class="docTitle groupTitle"><a href="#">研究计划</a></p>
                            <p class="docInfo standard-grey">最近更新：</p>
                            <p class="docInfo standard-grey">2014-12-25 15:30</p>
                            <div class="btn-group detailGroup">
                            	<button data-toggle="dropdown" class="btn btn-whiteframe dropdown-toggle detailBtn" type="button">详 情 <span class="caret"></span></button>
                                <ul role="menu" class="dropdown-menu docDetail">
                                	<p class="innertitle">文档名：</p>
                                    <a href="#">研究计划</a>
                                    <p class="innertitle">最近更新：</p>
                                    <p>2014-12-25 15:30</p>
                                    <p class="innertitle">已共享的组：</p>
                                    <p><a href="#">hepea</a><a href="#">议会</a><a href="#">大班</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                    <p class="innertitle">已共享的联系人：</p>
                                    <p><a href="#">小飞机</a><a href="#">hiearth</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                </ul>
                            </div>
                        </div>
                </div>
            </div>
            <div class="col-sm-1 col-xs-2 outcontainer2">
                <a class="pull-right moreIcon inverseIcon" href="#" title="更多">
                    &nbsp;<span class="fui-arrow-right"></span>
                </a>
            </div>
        </div>
    </div>
    
    <!--我的组+我的幻灯片-->
    <div class="container dispace-2">
    	<div class="row">
        	<div class="col-sm-7 col-xs-12">
            	<p class="column-title standard-grey">我的组</p>
                <!--创建组-->
                <div class="row" id="newGroup">
            		<div class="col-sm-9 col-xs-9">
            			<input type="text" placeholder="组名" class="form-control searchFrame">
  					</div>
                	<div class="col-sm-3 col-xs-3">
  						<button class="btn btn-primary pull-right groupBtn" type="submit">创 建 组</button>
                	</div>
            	</div>
                <!--组列表-->
                <div class="row row-fluid">
                	<div class="col-sm-10 col-xs-9 outcontainer1">
                    	<div class="row">
                        	<div class="col-sm-4 col-xs-4">
                            	<p class="docTitle groupTitle"><a href="#">工作组</a></p>
                            	<p class="docInfo standard-grey">最新添加的文档：</p>
                            	<p><a class="doclink" href="#">网站推广</a></p>
                                <div class="btn-group detailGroup">
                            		<button data-toggle="dropdown" class="btn btn-whiteframe dropdown-toggle detailBtn groupDetailBtn" type="button">详 情&nbsp; <span class="fui-triangle-right-large iconSmall"></span></button>
                                	<ul role="menu" class="dropdown-menu docDetail groupDetail">
                                		<p class="innertitle">组名：</p>
                                    	<a href="#">工作组</a>
                                    	<p class="innertitle">创建人：</p>
                                    	<a href="#">hiearth</a>
                                        <p class="innertitle">是组成员：</p>
                                    	<p>是</p>
                                    	<p class="innertitle">小组文档：</p>
                                    	<p><a href="#">hepea</a><a href="#">议会</a><a href="#">大班</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                    	<p class="innertitle">小组成员：</p>
                                    	<p><a href="#">小飞机</a><a href="#">hiearth</a></p>
                                	</ul>
                            	</div>
                            </div>
                            <div class="col-sm-4 col-xs-4">
                            	<p class="docTitle groupTitle"><a href="#">爱学习 </a><span class="fui-link superscript"></span></p>
                            	<p class="docInfo standard-grey">最新添加的文档：</p>
                            	<p><a class="doclink" href="#">网站推广</a></p>
                                <div class="btn-group detailGroup">
                            		<button data-toggle="dropdown" class="btn btn-whiteframe dropdown-toggle detailBtn groupDetailBtn" type="button">详 情&nbsp; <span class="fui-triangle-right-large iconSmall"></span></button>
                                	<ul role="menu" class="dropdown-menu docDetail groupDetail">
                                		<p class="innertitle">组名：</p>
                                    	<a href="#">爱学习</a>
                                    	<p class="innertitle">创建人：</p>
                                    	<a href="#">uiop0009</a>
                                        <p class="innertitle">是组成员：</p>
                                    	<p>是</p>
                                    	<p class="innertitle">小组文档：</p>
                                    	<p><a href="#">hepea</a><a class="newDoc" href="#">议会</a><a class="newDoc" href="#">大班</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                    	<p class="innertitle">小组成员：</p>
                                    	<p><a href="#">小飞机</a><a href="#">hiearth</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                	</ul>
                            	</div>
                            </div>
                            <div class="col-sm-4 col-xs-4">
                            	<p class="docTitle groupTitle"><a href="#">棋友会</a></p>
                            	<p class="docInfo standard-grey">最新添加的文档：</p>
                            	<p><a class="doclink" href="#">残局</a></p>
                                <div class="btn-group detailGroup">
                            		<button data-toggle="dropdown" class="btn btn-whiteframe dropdown-toggle detailBtn groupDetailBtn" type="button">详 情&nbsp; <span class="fui-triangle-right-large iconSmall"></span></button>
                                	<ul role="menu" class="dropdown-menu docDetail groupDetail">
                                		<p class="innertitle">组名：</p>
                                    	<a href="#">棋友会</a>
                                    	<p class="innertitle">创建人：</p>
                                    	<a href="#">uiop0008</a>
                                        <p class="innertitle">是组成员：</p>
                                    	<p>是</p>
                                    	<p class="innertitle">小组文档：</p>
                                    	<p><a href="#">hepea</a><a href="#">议会</a><a class="newDoc" href="#">国际象棋...</a><a href="#"><span class="glyphicon glyphicon-plus"></span></a></p>
                                    	<p class="innertitle">小组成员：</p>
                                    	<p><a href="#">小飞机</a><a href="#">hiearth</a></p>
                                	</ul>
                            	</div>
                            </div>
                        </div>
                    </div>
                    <div class="col-sm-2 col-xs-3 outcontainer2">
                    	<a class="pull-right moreIcon inverseIcon" href="#" title="更多">
                    	&nbsp;<span class="fui-arrow-right"></span>
                    	</a>
                    </div>
                </div>
            </div>
            <!--我的幻灯片-->
        	<div class="col-sm-5 col-xs-12" id="moreSpacing">
        		<div class="myPPT">
                	<div>
                    	<span id="mypptTitle">我的幻灯片</span>
                        <a class="pull-right moreIcon" id="smallBtn" href="#" title="更多">
                    	&nbsp;<span class="fui-arrow-right"></span>
                    	</a>
                    </div>
                    <div class="shadowBorder"></div>
                    <div id="picture">
                    	<a href="#"><img src="pic/pptdemo.jpg" />
                        <div id="pptTitle">演讲的艺术</div></a>
                    </div>
                    
                </div>
            </div>
        </div>
    </div>
    
    
    
    
    
    
    
    
    
    
    
    
    <div class="footer">
    	<a href="#"><span class="glyphicon glyphicon-send"></span> 连星 @ Copyright by www.hepea.net</a>
    </div>
    
    
    
	<script type="text/javascript" src="static/js/promise.js"></script>
	<script type="text/javascript" src="static/js/ajax.js"></script>
	<script type="text/javascript" src="static/js/jquery-1.11.1.min.js"></script>
    
    <script type="text/javascript" src="static/flat-ui-dist/js/flat-ui.min.js"></script>
    
    <script type="text/javascript">
		$(function(){
				$('.input-group').on('focus', '.form-control', function () {
      				$(this).closest('.input-group, .form-group').addClass('focus');
    			}).on('blur', '.form-control', function () {
      				$(this).closest('.input-group, .form-group').removeClass('focus');
    			});
				
				
				$('.detailGroup').each(function(index, element) {
                    $(this).hover(function(){
							clearTimeout(window['t'+index]);
							$(this).addClass('open');
						},function(){
							var $this = $(this);
							window['t'+ index]=setTimeout(function(){$this.removeClass('open');},200);
					});
					
                });
				
				function resizeWindow(){
					if($(window).width() >= 768){
						$('#moreSpacing').css('padding-left',50);
					}
					else {
						$('#moreSpacing').css('padding-left',15);
					}
				}
				resizeWindow();
				$(window).resize(resizeWindow);
				
				var isDevelop = false;
				var newMessage = $('#newMessage');
				var develop = $('#develop');
				
				var data = [5,
				{msg:'<a href="/userView/uiop0007">uiop0007</a> 想邀请您作为联系人。', btn:'<a class="dispose1" order="1" onclick="authHelper.messageReply.receiveContact(this, \'uiop0007\');">接受</a> &nbsp;<a class="dispose2" order="1" onclick="authHelper.messageReply.omitContact(this, \'uiop0007\');">忽略</a>',deal:'0'},
				{msg:'<a href="/userView/uiop0007">uiop0006</a> 想邀请您作为联系人。', btn:'<a class="dispose1" order="2" onclick="authHelper.messageReply.receiveContact(this, \'uiop0007\');">接受</a> &nbsp;<a class="dispose2" order="2" onclick="authHelper.messageReply.omitContact(this, \'uiop0007\');">忽略</a>',deal:'0'},
				{msg:'<a href="/userView/uiop0007">uiop0005</a> 想邀请您作为联系人。', btn:'<a class="dispose1" order="3" onclick="authHelper.messageReply.receiveContact(this, \'uiop0007\');">接受</a> &nbsp;<a class="dispose2" order="3" onclick="authHelper.messageReply.omitContact(this, \'uiop0007\');">忽略</a>',deal:'0'},
				{msg:'<a href="/userView/uiop0007">uiop0004</a> 想邀请您加入组 <a href="#">语言交流</a> 。', btn:'<a class="dispose1" order="4" onclick="authHelper.messageReply.receiveContact(this, \'uiop0007\');">接受</a> &nbsp;<a class="dispose2" order="4" onclick="authHelper.messageReply.omitContact(this, \'uiop0007\');">忽略</a>',deal:'0'},
				{msg:'<a href="/userView/uiop0007">uiop0003</a> 给您分享了文档 <a href="#">一天学会抽...</a> 。', btn:'<a class="dispose1" order="5" onclick="authHelper.messageReply.receiveContact(this, \'uiop0007\');">接受</a> &nbsp;<a class="dispose2" order="5" onclick="authHelper.messageReply.omitContact(this, \'uiop0007\');">忽略</a>',deal:'0'}
				];
					
				var msgTitle = $('#msgTitle');
				var msgContent = $('#msgContent');
				var bottomBtn = $('#bottomBtn');
				var noticeNum = $('#noticeNum');
				var msgID = 1;
								
				function loadMessage(){
					if(data != null){
						newMessage.removeClass('hide');
						noticeNum.html(data[0]);
						if(data[0]<6){
							preInit();
							develop.click(function(){
								if(!isDevelop){
									developInit();
									bottomBtn.removeClass('hide');
									bottomBtnInit();
									isDevelop = true;
								}
								else {
									newMessage.removeClass('msgDevelop');
									bottomBtn.addClass('hide');
									for(var i = 1; i< data.length; i++){
										if(data[i].deal != true){
											msgID = i;
											break;
										}
										else if(i == data.length-1){
											newMessage.addClass('hide');
											noticeNum.html('&nbsp;&nbsp;');
										}
									}
									preInit();
									isDevelop = false;
								}
							});
						}
						else {
							developInit();
							$('#developIcon').addClass('fui-cross');
							$('#viewAll').removeClass('hide');
							develop.click(function(){
								newMessage.addClass('hide');
							});
						}
					}
				}
				function developInit(){
					newMessage.addClass('msgDevelop');
					changeMsgTitle2(data[0]);
					developShow();
					$('.dispose1').each(function(index, element) {
                        $(this).click(dispose1Btn);
						$(this).click(developRefresh);
                    });
					$('.dispose2').each(function(index, element) {
                        $(this).click(dispose2Btn);
						$(this).click(developRefresh);
                    });
				}
				function preInit(){
					changeMsgTitle(msgID,data[0]);
					msgContent.html(data[msgID].msg+" &nbsp; &nbsp; &nbsp; "+data[msgID].btn);
					$('.dispose1').click(function(){
						var THIS = this;
						dispose1Btn(THIS);
						nextMessage();
                    });
					$('.dispose2').click(function(){
						var THIS = this;
						dispose2Btn(THIS);
						nextMessage();
                    });
				}
				function nextMessage(){
					msgID++;
					if(msgID<data.length){
						if(data[msgID].deal != true){
							preInit();
						}
						else {
							nextMessage();
						}
					}
					else {
						newMessage.addClass('hide');
						noticeNum.html('&nbsp;&nbsp;');
					}
				}
				function dispose1Btn(THIS){
					var id =  $(THIS).attr('order');
					if(id == undefined){
						id = $(this).attr('order');
					}
					data[id].btn = '<span class="greencolor">（已接受）</span>';
					data[id].deal = true;
					
				}
				function dispose2Btn(THIS){
					var id =  $(THIS).attr('order');
					if(id == undefined){
						id = $(this).attr('order');
					}
					data[id].btn = '<span class="redcolor">（已忽略）</span>';
					data[id].deal = true;
				}
				function changeMsgTitle(id,total){
					var title = "新通知"+id+"/"+total;
					msgTitle.html(title);
				}
				function changeMsgTitle2(total){
					var title = "您有"+total+"条新通知";
					msgTitle.html(title);
				}
				function developShow(){
					var content = "";
					for(var i = 1; i< data.length; i++){
						content += '<span id="msg'+i+'"></span><span class="pull-right" id="btn'+i+'"></span><br>';
					}
					msgContent.html(content);
					for(var i = 1; i< data.length; i++){
						$("#msg"+i).html(data[i].msg);
						$("#btn"+i).html(data[i].btn);
					}
				}
				function developRefresh(){
					var id = $(this).attr('order');
					$("#btn"+id).html(data[id].btn);
				}
				function bottomBtnInit(){
					$('#allExcept').click(function(){
						$('.dispose1').each(function(){
							$(this).click();
						});
					});
					$('#allLgnore').click(function(){
						$('.dispose2').each(function(){
							console.log(this);
							$(this).click();
						});
					});
					$('#closePanel').click(function(){
						newMessage.addClass('hide');
						noticeNum.html('&nbsp;&nbsp;');
					});
				}
				
				loadMessage();
				
				
				
			});
	</script>
</body>
</html>
