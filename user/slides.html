<!doctype html>
<html>
<head>
	<title data-l10n-id="home.serverName">连星</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<link rel="shortcut icon" href="/favicon.ico">
    
    <link href="../static/bootstrap-3.2.0-dist/css/bootstrap.min.css" rel="stylesheet">
	<link href="../static/flat-ui-dist/css/flat-ui.min.css" rel="stylesheet">
    <link href="../static/css/common-setting.css" rel="stylesheet">
    <link href="../static/css/insidePageSetting.css" rel="stylesheet">
    <link href="../static/css/subfieldLayout.css" rel="stylesheet">
    <link href="../static/css/padDetail.css" rel="stylesheet">
    <link href="../static/css/slides.css" rel="stylesheet">
</head>

<body>
	<div id="header">
    	<div class="container dispace-1">
        	<span id="welcome">欢迎来到连星</span>&nbsp;&nbsp;
            <span id="introduce">实时互动教学网站</span>
            <div class="btn-group detailGroup pull-right userinfo">
            	<a data-toggle="dropdown" href="#"><img src="../pic/user.png"></a>
                <ul role="menu" class="dropdown-menu userdropdown">
                	<li><a href="#"><span class="fui-user"></span> uiop0009</a></li>
                    <li><a href="#"><span class="fui-gear"></span> 账号设置</a></li>
                    <li><a href="#"><span class="fui-exit"></span> 退出</a></li>
                </ul>
            </div>
            <a class="pull-right notice" href="/user/messages" title="通知"><span class="glyphicon glyphicon-bullhorn"></span> <span id="noticeNum">&nbsp;&nbsp;</span></a>
            
        </div>   
    </div>
    <!--主菜单-->
    <div class="drawShadow">
    <div class="container dispace-1">
    	<nav class="navbar navbar-defind" role="navigation">
        	<div class="navbar-header">
            	<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#mainMenu"></button>
                <a class="navbar-brand-defind" href="/user"><span class="glyphicon glyphicon-send" id="send"></span><span id="logotitle">连 星</span></a>
            </div>
            <div class="collapse navbar-collapse" id="mainMenu">
            	<ul class="nav navbar-nav mainOption">
                	<li><a class="grey" href="/user">&nbsp; 我 &nbsp;</a></li>
                    <li><a class="grey" href="/user/contacts">联系人</a></li>
                    <li><a class="grey" href="/user/userGroups">小组</a></li>
                    <li><a class="grey" href="/user/pads">文档</a></li>
                    <li class="active"><a class="grey" href="/user/slides">幻灯片</a></li>
                </ul>
                <form class="navbar-form navbar-right" id="searchform" action="#" role="search">
                	<div class="form-group">
                    	<div class="input-group">
                        	<input class="form-control" id="searchBox" type="search" placeholder="用户/小组">
                            <span class="input-group-btn">
                            	<button type="submit" class="btn" id="searchBtn"><span class="fui-search"></span></button>
                            </span>
                        </div>
                    </div>
                </form>
            </div>
        </nav>
    </div>
    </div>
    
    <div class="container dispace-2">
    	<div class="row">
        	<div class="col-sm-8 col-xs-7">
    			<p class="standard-title">我的幻灯片(<span id="slidersNum">0</span>)</p>
            </div>
            <div class="col-sm-4 col-xs-5">
            	<div class="pull-right" id="addnewItem">
                	<input type="text" placeholder="幻灯片名" class="form-control inputnameframe" id="inputItemTitle">
                    <button class="btn btn-newItem" type="button" id="inputnewItem">新幻灯片</button>
                </div>
            </div>
        </div>
        <div id="contactsArea">
        	
        </div>
        <div class="center" id="pagechange">
        	<a class="fui-arrow-left" id="prebtn"></a>
            <div id="pagebtn"></div>
            <a class="fui-arrow-right" id="nextbtn"></a>
        </div>
        
    </div>
    
    
    
    
    <div class="footer">
    	<a href="#"><span class="glyphicon glyphicon-send"></span> 连星 @ Copyright by www.hepea.net</a>
    </div>
    
     
    
    <script type="text/javascript" src="../static/js/promise.js"></script>
	<script type="text/javascript" src="../static/js/ajax.js"></script>
	<script type="text/javascript" src="../static/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="../static/flat-ui-dist/js/flat-ui.min.js"></script>
    
    <script type="text/javascript">
		$(function(){
			$('.input-group').on('focus', '.form-control', function () {
      				$(this).closest('.input-group, .form-group').addClass('focus');
    			}).on('blur', '.form-control', function () {
      				$(this).closest('.input-group, .form-group').removeClass('focus');
    			});
			
			$('.detailGroup').each(function(index, element) {
                    $(this).hover(function(){
							clearTimeout(window['t'+index]);
							$(this).addClass('open');
						},function(){
							var $this = $(this);
							window['t'+ index]=setTimeout(function(){$this.removeClass('open');},200);
					});
                });
			
			var contactsArea = $('#contactsArea');
			var pagebtn = $('#pagebtn');
			var lastclick = ' ';
			var curclick = ' ';
			var curN = 1; //当前播放的分页
			var data = [7,
			{imgurl: '../pic/pptcover/pptcover1.jpg',slideid:'c7POTm2LeFBqvujO',slidename:'电工技术讲义',remark:'无'},
			{imgurl: '../pic/pptcover/pptcover2.jpg',slideid:'c7POTm2LeFBqvujO',slidename:'舞台艺术概论',remark:'舞台艺术课程第一章讲义'},
			{imgurl: '../pic/pptcover/pptcover3.jpg',slideid:'c7POTm2LeFBqvujO',slidename:'春日养生',remark:'养生技艺之节气养生教案'},
			{imgurl: '../pic/pptcover/pptcover4.jpg',slideid:'c7POTm2LeFBqvujO',slidename:'送礼的艺术',remark:'礼品选择的技巧课程讲义'},
			{imgurl: '../pic/pptcover/pptcover5.jpg',slideid:'c7POTm2LeFBqvujO',slidename:'PPT制作工具',remark:'PPT制作课程第二章第三节'},
			{imgurl: '../pic/pptcover/pptcover6.jpg',slideid:'c7POTm2LeFBqvujO',slidename:'钢笔书法技巧',remark:'书法课程之钢笔书法讲义'},
			{imgurl: '../pic/pptcover/pptcover7.jpg',slideid:'c7POTm2LeFBqvujO',slidename:'农业技术大全',remark:'农业科普知识讲义'}
			];
			
			var datalength = data.length;
			$('#slidersNum').html(data[0]);
			
			paging();
			
			function resizeWindow(){
				if($(window).width() >= 975){
					contactsArea.html('<div class="cellContent celldis"></div><div class="cellContent celldis"></div><div class="cellContent"></div><div class="cellContent pull-right"></div>');
					var dis = Math.floor((contactsArea.width()-171*4)/3);
					$('.celldis').css('margin-right',dis+'px');
				}
				else if($(window).width() >= 620) {
					contactsArea.html('<div class="cellContent celldis"></div><div class="cellContent"></div><div class="cellContent pull-right"></div>');
					var dis = Math.floor((contactsArea.width()-171*3)/2);
					$('.celldis').css('margin-right',dis+'px');
				}
				else if($(window).width() >= 416) {
					contactsArea.html('<div class="cellContent"></div><div class="cellContent pull-right"></div>');
				}
				else {
					contactsArea.html('<div class="cellContent"></div>');
				}
				contactsShow();
			}
			resizeWindow();
			$(window).resize(resizeWindow);
			
			
			function paging(){//分页
				var contactnum = datalength-1;
				var pagenum = Math.ceil(contactnum/12);
				var htmltext = '';
				for(n = 1; n <= pagenum; n++){
					htmltext += '<a id="pagebtn'+n+'"></a>';
					window['pageArray'+n] = [];
					var arr = window['pageArray'+n];
					for(i = 1; i < 25; i++){
						var id = 24*(n-1)+i;
						if(id < datalength){
							arr.push(id);
						}
						else {
							break;
						}
					}
				}
				pagebtn.html(htmltext);
				for(n = 1; n <= pagenum; n++){
					$('#pagebtn'+n).click({id: n},pagebtnclick);
				}
				$('#prebtn').click(function(){
					var btnid = (curN-1)>0 ? (curN-1) : pagenum;
					$('#pagebtn'+btnid).click();
				});
				$('#nextbtn').click(function(){
					var btnid = (curN+1)<=pagenum ? (curN+1) : 1;
					$('#pagebtn'+btnid).click();
				});
				$('#pagebtn1').click();
			}
			
			function pagebtnclick(e){
				lastclick = curclick;
				curclick = this;
				curN = e.data.id;
				if(curclick != lastclick){
					$(lastclick).removeClass('active');
					$(this).addClass('active');
					contactsShow();
				}
			}
			function contactsShow(){ //分页展示刷新
				var arr = window['pageArray'+curN];
				var cellContent = $('.cellContent');
				var cyclength = cellContent.length;
				var cycid = 0;
				cellContent.each(function(){
					$(this).html('');
				});
				$.each(arr,function(n,value){
					var imgurl = data[value].imgurl;
					var htmltext = $(cellContent[cycid]).html();
					
					htmltext += '<div class="pptlist"><a href="/slide/'+data[value].slideid+'" target="_blank"><img src="'+data[value].imgurl+'"><p class="itemTitle smallertitle">'+data[value].slidename+'</p></a><p class="profile smallerpro">备注：'+data[value].remark+'</p></div>';
					
					$(cellContent[cycid]).html(htmltext);
					if(++cycid >= cyclength){
						cycid = 0;
					}
				});
			}
			
			
		});
	</script>
</body>
</html>
